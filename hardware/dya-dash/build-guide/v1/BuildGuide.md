# <img src="../../../../img/dya.svg" width=32> DYA Dash v1.0 ビルドガイド

https://cormoran707.booth.pm/items/6913095 で配布中のキットのビルドガイドです。

## 更新履歴

| 日付       | 内容                       |
| ---------- | -------------------------- |
| 2025/05/12 | ビルドガイドを公開         |
| 2025/05/15 | 内容を推敲、画像を少し追加 |

## 別途購入が必要な部品

- XIAO nrf52840 x2 (試作 V1 ではキットに付属)
  - 基板に直接はんだ付けします
- Kailh Choc v2 ロープロファイルキースイッチ 43 個(片側トラックボールの場合)
  - Kailh Lofree Low-profile POM 系のピンが２ピンのものが使えます
  - ３ピンのものはピンを切れば使えるかも？持ってないのでわかりません
  - トッププレートの厚みは 2.0mm です
  - Deep sea silent mini, Lofree Ghost, Kailh White Rain Switch ではいい感じに使えました
- キーキャップ一式
  - 1U 39 個
  - 1.5U 2 個
  - 1.25U 2 個 (1U でも一応 OK)
  - [YMDK 116](https://ja.aliexpress.com/item/1005006981216357.html) と [THT low profile](https://talpkeyboard.net/items/66795277401c310b1f80e83f)(1.25U は存在しない)が使えることは確認しています
  - トラックボールの真横のキーキャップが親指と干渉しがちなので、より小さなキーキャップを使った方が快適と思われます
- 25mm トラックボール用ボール
  - [エレコムの赤いボール](https://www.amazon.co.jp/%E3%82%A8%E3%83%AC%E3%82%B3%E3%83%A0-%E3%83%88%E3%83%A9%E3%83%83%E3%82%AF%E3%83%9C%E3%83%BC%E3%83%AB%E7%94%A8%E4%BA%A4%E6%8F%9B%E3%83%9C%E3%83%BC%E3%83%AB-M-RT1DRBK-M-RT1BRXBK%E3%83%AC%E3%83%83%E3%83%89-M-B25RD/dp/B0D4DYH8XY)がおすすめです。
  - [ペリックスの深い赤](https://www.amazon.co.jp/Perixx-%E3%83%9A%E3%83%AA%E3%83%83%E3%82%AF%E3%82%B9-PERIPRO-305GRD-%E4%BA%A4%E6%8F%9B%E7%94%A8%E3%83%88%E3%83%A9%E3%83%83%E3%82%AF%E3%83%9C%E3%83%BC%E3%83%AB-%E5%85%89%E6%B2%A2%E4%BB%95%E4%B8%8A%E3%81%92/dp/B0BDZJFYCH)は感度が悪く微妙でした。（ケース設計の問題かも）
  - X にいる染色職人の方々が作っているボールでも使えるはずですが、色によって感度が変わります
- 単４電池 x2
  - ファームウェアのバッテリー残量はニッケル水素電池向けに調整されています
  - アルカリ乾電池等も使えると思われますが未検証です
- USB ケーブル
  - データ通信に対応した Type C ケーブル（PC 接続用、ファームウェア書き込み用）
  - （現在のファームウェアでは未対応/未検証）データ通信に対応した Type C to C ケーブル（左右接続用）
- 適当なテープ
  - FFC ケーブルをケースに固定するために使います

## 必要な工具

- はんだ、はんだごて
  - 温度調整機能付きのハンダゴテがおすすめです
  - [C 型のコテ先](https://lang-ship.com/blog/work/900m/#toc19)をおすすめしておきます
  - はんだ吸い取り線もあると、失敗した時のリカバリーに非常に役立ちます。
- ニッパー
- プラスドライバー
  - ２種類の M2 ネジが付属しています
  - それぞれプラスドライバの径が違うので精密ネジ用と普通ネジ用の２種類が必要かもしれません (TODO: ドライバのサイズを調べる)

## キットに含まれる部品

- 回路基板（左、右、トラックボール基板 x2 が接続されたもの、厚み 1.2mm）
  - このガイドではトラックボール基板１つは使いません
- 3D プリント製ケース　計５パーツ（左ボトム、右ボトム、左トップ、右トップ、右用トラックボールホルダー）
  - トラックボールホルダーにはセラミックボール x3 が取り付け済みです
- 3D プリント製ボタン
  - 設定ボタン x2
  - 矢印キーボタン x4
  - 電源スイッチカバー x2
- 電子部品
  - 設定ボタン用タクトスイッチ x2
  - 電源用スライドスイッチ x2
  - 矢印キー用やわらかいタクトスイッチ x4
  - PMW3610 トラックボールセンサー x1
  - トラックボールセンサー用レンズ x1
  - FFC ケーブル x1
  - 電池ケース端子
    - プラス極 x2
    - マイナス極 x2
  - Kailh Choc v2 ホットスワップソケット x43
    - 予備で少し多めに入れておく予定です。
  - 7pin ピンヘッダ x4(XIAO 取り付け用)
    - XIAO を買ったらついてくるかもしれませんが余っているので念のために入れています
- ねじ
  - M2 12mm x4 (タッチセンサー用)
  - M2 5mm x15 (トップ/ボトムケース固定用)
  - M2 4mm x3 (トラックボールケース固定用)
- 滑り止め x8
- XIAO と 7pin ピンヘッダを半田付けするための 3D プリント製補助具 x2
- ネオジム磁石 x6

| 梱包された状態               | 回路基板以外のすべての部品   |
| ---------------------------- | ---------------------------- |
| ![](img/0_kit_contents0.jpg) | ![](img/0_kit_contents1.jpg) |

## 特別な注意点

- FFC ケーブルの面裏に注意、FFC ケーブルを丁寧に取り扱うこと。
- ネジを強く締めない。3D プリントケースの穴が簡単に潰れます。
- XIAO の取り付け、電池端子の取り付けは少し難しいので覚悟してください

## 未解決の不具合/機能

2025/05/11 現在

- Deep sleep から復帰後にトラックボールが動作しません　手動で電源を一度オンオフする必要があります
  - ファームウェアの改善で解決できる可能性がありますが、回路設計上の問題で解決できない可能性があります
  - 最悪 Deep sleep に入るまでの時間を調整したり、deep sleep に入らないようにすることで回避は可能です
- 左右有線通信のための USB ポートがありますがファームウェアには未実装です。
  - 現在 ZMK 本体で開発中の機能に対応させる予定ですが、ピン数を減らすために少し挑戦的な回路設計になっており、思い通りに動くかわかりません。
  - 最悪でも左右給電用途としては使えるはず？
- ファームウェアのどこかにバグがありそう
  - たまに LED が消えずについたままになったりするのを観測しています
  - これはがんばって改善します...

## 組み立て手順

### 基板の最終状態

| 左手を裏から見た写真     | 右手を裏側から見た写真    |
| ------------------------ | ------------------------- |
| ![](img/1_pcb0_left.jpg) | ![](img/1_pcb0_right.jpg) |

## 1. ファームウェアの書き込み

1. XIAO nrf52840 を２つ用意します。
2. [リリースページ](https://github.com/cormoran/dya-dash-keyboard/releases) から `zmk_dya_dash_left.uf2` と `zmk_dya_dash_right_studio.uf2` をダウンロードします
3. １つ目の XIAO nrf52840 を USB で PC と接続して、リセットボタンを素早く２回押します
   - [こちらのサイトなどが参考になります](https://qiita.com/KentaHarada/items/3e1612116ec45462a837#2-%E5%A4%89%E6%8F%9B%E3%81%97%E3%81%9Fuf2%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92xiao-nrf52840%E3%81%AB%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%82%80)
4. PC に `XIAO-SENSE` という名前で USB メモリのようなデバイスが接続されるので、`zmk_dya_dash_left.uf2` をそこにドラッグ&ドロップします
5. `XIAO-SENSE` が自動で切断されて ZMK ファームウェアが動き始めます
6. 同様にしてもう一つの XIAO に `zmk_dya_dash_right.uf2` を書き込みます。

どちらに左右のファームを書き込んだか覚えておいてください。

Step4 では左のファーム（`zmk_dya_dash_left.uf2`）を書き込んだ XIAO を左手側に、右のファームを書き込んだものを右側の基板に取り付けます。

もし左右がわからなくなった場合は XIAO を半田付けした後でもう一度上のステップを行なってファームを書き込んでください。
プログラムは左右で役割が異なるため、逆につけていると入力されるキーなどが逆転します。電子回路的には左右で同じ構成なので、間違えて左右逆に取り付けても回路は壊れないです。

キーボードを USB 接続で使う際は、右側の XIAO のポートを PC と接続します（[FeatureGuide](./FeatureGuide.md)参照）

## 2. 基板の切り離し

### 2.1 左右/トラックボール基板の切り離し

繋がっている基板をニッパー等で切り離します。

下の画像で矢印で示されている、小さなドリル穴で接続されている部分を切断してください。
**トラックボール基板は切断箇所ぎりぎりまで配線が通っています。** 配線を傷つけないように注意してください。

バリが出た場合は切断面をニッパーで整えます。

### 2.2 トラックボールをつける部分の基板の切り離し

**右側**基板（部品が付いている側を裏側にした時に右手にあたる方）の下の部分の基板を切り離します。
**左手側は切り離さない**でそのままにします。

繋がっている部分をカッターなどで傷つけて、ある程度深くまで傷つけられたら、意を決して折ります。
切り取った基板は使わないので捨ててください。
バリが出た場合はニッパーで整えます。

| 最初の状態                                              | 2.1 小さなドリル穴で繋がってる部分を切る       | 2.2 右手基板のトラックボール部分を切る                                           | 右手を表から見た図  |
| ------------------------------------------------------- | ---------------------------------------------- | -------------------------------------------------------------------------------- | ------------------- |
| 以下は**裏面**を上にした状態です。　![](img/1_pcb1.jpg) | 下の矢印部分１４箇所です。 ![](img/1_pcb2.jpg) | 下の枠で囲った部分です。**右手基板のみを切ってください！！** ![](img/1_pcb3.jpg) | ![](img/1_pcb4.jpg) |

## 3. はんだづけ

### 3.1 キーボード基板

以下の部品を順にはんだ付けしていきます。
説明では左手を中心に解説し、右手は差分だけを解説します。間違った時のダメージを減らすために片側を先に組み立てると良いです。

1. スイッチソケット
2. ピンソケットと XIAO
3. 電源スイッチ
4. 電池端子
5. 設定ボタン用タクトスイッチ、十字キー用タクトスイッチ

#### 左手基板の半田付け

##### 1. スイッチソケットを半田付けします。

**kailh choc v2 ソケットには[方向があります](https://scrapbox.io/self-made-kbds-ja/Kailh_Choc_%E3%82%BD%E3%82%B1%E3%83%83%E3%83%88%E3%81%AE%E6%96%B9%E5%90%91%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6)**。爪のような出っ張りが中心の穴側に来るようにしてはんだ付けしてください。（方向を間違ってもスイッチを差しづらくなるだけで、大きな問題なく使えるとは思います。）

| 最初の状態            | 左手にスイッチソケットを載せた状態 | スイッチソケットを半田付けした状態                                                 |
| --------------------- | ---------------------------------- | ---------------------------------------------------------------------------------- |
| ![](./img/3_pcb0.jpg) | ![](./img/3_pcb1.jpg)              | ![](./img/3_pcb2.jpg) （写真ではすでに XIAO が乗ってますが次のステップで乗せます） |

##### 2.1 XIAO を半田付けします。

難しいのでよく読んでください。（設計を微妙にミスしてピンヘッダを使う方法にしています。）
やり直しは非常に困難です。

1.  XIAO を図のように基板の裏側（部品がついた側）に乗せます。
2.  XIAO の側からピンヘッダの長い側を挿します。この時、ピンヘッダと同じパックに入っている白い治具を図のようにピンヘッダと XIAO の間に挟みます。これで、表側に少しだけピンの頭が出るような状態になるはずです。XAIO は基板と密着している状態です。
3.  表側（電子部品がついてない側）の、白い治具をつけていない側からピンソケットを半田付けします。
    **白い治具は熱で溶けます** ２ピンくらいつけたら治具を外して、残りのピンをはんだ付けします。
    半田付けの際は、ハンダを盛りすぎないようにしてください。表に飛び出た部分が大きいとトッププレートに干渉します。
4.  XIAO の逆サイドも同様にしてピンを半田付けします。表から見ると写真のような状態になります
5.  基板を裏返して、XIAO を基板にしっかり密着させた状態で XIAO とピンヘッダをはんだ付けします。
6.  ピンヘッダの XIAO 側に飛び出た部分をニッパー等でカットします。この時、XIAO の金属シールドよりもピンヘッダが低くなるようにカットしてください。ピンヘッダが金属シールドより高く飛び出ているとボトムケースと干渉します。

| 1.XIAO を基板に乗せた状態 | 2.XIAO にピンヘッダを指して、治具をつけた状態 | 4.表面をはんだ付けした状態 | 6.XIAO のパッドをはんだ付けして、ピンヘッダを切った状態 |
| ------------------------- | --------------------------------------------- | -------------------------- | ------------------------------------------------------- |
| ![](./img/3_pcb2.jpg)     | ![](./img/3_pcb3.jpg)                         | ![](./img/3_pcb4.jpg)      | ![](./img/3_pcb5.jpg)                                   |

##### 2.2. XIAO の表面実装パッドを半田付けします。

基板の表面から見て、下の写真で矢印で示した３箇所を半田付けします。
基板側にパッドがない一番右下の XIAO のパッド（矢印で示していない部分）は半田付け不要です。

ある程度しっかりと熱を加えながらハンダをつけないと XIAO のパッドにハンダがつかないです。
隣り合うパッドは２つがお互いにショートしないように気をつけてください。ショートしてしまった場合ははんだ吸い取り線が必要と思われます。

**※ショートした状態で電源を入れてみてはいけません。電源のプラスとマイナスがショートした状態になって回路が壊れたり、電池が発熱したりします。**

どうしてもうまくいかない場合は、こんな方法でつけている人もいるようです https://x.com/NetShini/status/1907390264152613021 僕は普通にはんだづけしています。

| ３箇所を半田付け（下の写真では左上をまだ半田付けしていません） |
| -------------------------------------------------------------- |
| ![](./img/3_pcb6.jpg)                                          |

##### 3. 次に電源スイッチをつけます

基板裏側からスイッチをつけて表側ではんだ付けします。　半田付けしたら表側の出っ張りができるだけないようにピンを切って処理します。

| スイッチをつける場所  | スイッチを挿した状態  | 表側を向けた状態      | 半田付けした状態       |
| --------------------- | --------------------- | --------------------- | ---------------------- |
| ![](./img/3_pcb7.jpg) | ![](./img/3_pcb8.jpg) | ![](./img/3_pcb9.jpg) | ![](./img/3_pcb10.jpg) |

##### 4.1 電源端子をつけます

難易度が高いです　**取り付け向きにも注意してください**。

**バネがついたマイナス極端子**を基板外側（**電源スイッチの側**）に半田付けします。
図のようにまずは基板表面のみはんだ付けします。（次のステップで位置が問題ないことを確認してから追加で半田付けします。）
この時、端子の両サイドについた２つのでっぱりが、ちょうど基板の厚みの中心あたりに来ることを確認して半田付けしてください。高さがずれている場合は端子を少し曲げて微調整してください。位置がズレると上下のケースと干渉します。

| マイナス端子を基板に乗せた状態 | 端子のでっぱりがちょうど基板の厚みの真ん中あたりにくる | 表面からはんだづけ     |
| ------------------------------ | ------------------------------------------------------ | ---------------------- |
| ![](./img/3_pcb11.jpg)         | ![](./img/3_pcb12.jpg)                                 | ![](./img/3_pcb13.jpg) |

##### 4.2 プラスの電源端子をつけます

要領はマイナス端子と同じですが、うまく固定できなくて難しいかもしれません。

| プラス端子を表面から半田付け | でっぱり部分が基板の厚みの真ん中あたりに来るように |
| ---------------------------- | -------------------------------------------------- |
| ![](./img/3_pcb14.jpg)       | ![](./img/3_pcb15.jpg)                             |

##### 4.3 ボトムケースとの干渉チェック

両方取り付けたら一度ボトムケースに入れてみてください。入れた時に電池端子が干渉しない（基板がボトムケースの高さより高く出っ張らない）ことを確認してください

|                        |
| ---------------------- |
| ![](./img/3_pcb16.jpg) |

##### 4.4 トップケースとの干渉チェック

トップケースにも一度はめこんでみてください。電池端子部分は少し無理やりはめ込む必要があります。**が、力を入れるとカバー部分が割れる可能性があります。** 3D プリントの方法に少し問題があるようなので現在設計を再検討中です。
もし割れてしまった場合は購入したプラットフォームで相談もらえれば改善後のバージョンを再送します。公開中の 3D データも更新予定です。

ぴったりはめ込んだ時にトップケースと基板の隙間がほぼなくなる状態になることを確認してください。

|                        |
| ---------------------- |
| ![](./img/3_pcb17.jpg) |

##### 4.5 追加のはんだ付け

電源端子の位置が問題ないことを確かめられたら、強度を上げるために追加ではんだ付けします

|                        |                        |
| ---------------------- | ---------------------- |
| ![](./img/3_pcb18.jpg) | ![](./img/3_pcb19.jpg) |

##### 5. 設定ボタンを半田付けします

表面から設定ボタンを取り付けて、裏面ではんだ付けします。
しっかりと押し込んで固定した状態で半田付けしてください。

| 設定ボタンを取り付け   | 裏側のピンを曲げて固定 | 半田付け               |
| ---------------------- | ---------------------- | ---------------------- |
| ![](./img/3_pcb20.jpg) | ![](./img/3_pcb21.jpg) | ![](./img/3_pcb22.jpg) |

##### 簡易動作確認

ここまでできたら、電源端子の ± が正しい方向になっているかもう一度確認してください。
正しいと確信できたら、左右に電池を取り付けて電源を入れてみてください。
電源は下にスライドするとオンになります。

電源を入れた際に LED が光ってバッテリー残量を表示後、BLE 接続状態を表示します。
（左は黄色のアニメーション、右は一つ目の LED が黄色く点滅すると思います。）

LED が光らない場合は何かがおかしいです。

#### 右手の説明

基本は左手と同じようにはんだ付けしていきます。違う部分と注意点だけを解説します。

##### 電源端子

**電源端子の向きに注意してください。** 左手をちょうど鏡に写したようになる状態（マイナス端子は常に電源スイッチの側）が正しいです。

|                           |
| ------------------------- |
| ![](img/1_pcb0_right.jpg) |

##### 十字キー

右は設定ボタンの代わりに十字キーがつきます。以下のような雰囲気で半田付けします。スイッチが基板にしっかりと並行に密着した状態で半田付けします。傾いたり浮きすぎているとトッププレートに干渉します。

| 十字キーの部分にスイッチを取り付け | 裏側から半田付け       |
| ---------------------------------- | ---------------------- |
| ![](./img/3_pcb23.jpg)             | ![](./img/3_pcb24.jpg) |

### 3.2 トラックボール基板

1. キット同梱の以下の３つのパーツを用意してください
   基板は２つ付属していますが、このガイドでは１つしか使いません。２つの基板は両方同じ回路なのでどちらを使っても良いです。残りの一個はおまけです。

2. IC を以下のような方向で基板にはんだ付けします。 IC が基板に対して平行になるようにしてください。半田付け前にレンズがセットできるか確認することをお勧めします。 レンズは熱で溶けるので、半田付けはレンズを外した状態で行ってください。
   端のピンをまずはんだ付けすると IC が固定されて作業しやすくなります。
   長時間はんだごてを当てると IC が破損する可能性があるので注意してください。

3. IC を取り付けたら、IC についていた透明な保護フィルムを剥がしてレンズをセットします

4. 最後に IC の表側に出っ張っているレンズの足を処理します。
   このままではケースと干渉するので、出っ張りをニッパーで切断するか、ハンダゴテで熱を加えて潰すように溶かしてください。
   レンズが外れないように溶かすのが推奨されている方法のようですが、作者はニッパーで切断しています。

| 使うパーツ         | 向き               | 向き               | レンズを外して半田付けします |
| ------------------ | ------------------ | ------------------ | ---------------------------- |
| ![](./img/4_1.jpg) | ![](./img/4_2.jpg) | ![](./img/4_3.jpg) | ![](./img/4_4.jpg)           |

| 保護シールを剥がします | レンズを取り付けます | レンズの足を処理します |
| ---------------------- | -------------------- | ---------------------- |
| ![](./img/4_5.jpg)     | ![](./img/4_6.jpg)   | ![](./img/4_7.jpg)     |

### 3.3 タッチセンサー端子の取り付け

はんだ付けは不要です

基板の裏から M2 12mm ネジを差し込んでタッチセンサーボタンをねじ止めします
安定して通電するようにある程度しっかりと止める必要がありますが、強く締めすぎるとネジが基盤パターンをえぐるように破壊してしまいます。適度な強さで締めてください。
タッチセンサーボタンの方向をトッププレートの穴に入るように整えます。

|                    |                    |
| ------------------ | ------------------ |
| ![](./img/5_1.jpg) | ![](./img/5_2.jpg) |

## 5. 動作確認

左右に両方に電池を取り付けて電源を入れてみてください。
電源は下にスライドするとオンになります。

電源を入れた際に LED が光ってバッテリー残量を表示後、BLE 接続状態を表示します。[解説 Youtube 動画](https://youtu.be/y6X2OnoMX-M)を参照してください。

左右は自動的にペアリングするはずです。

この状態で Bluetooth 機器（PC or スマホ）からペアリングすることができます。

ペアリングできたら、基板のスイッチソケットにいくつかスイッチを挿して押してみてください。対応する文字が入力されるはずです。

- LED が光らずペアリングもできない場合：XIAO と基板のはんだ付けがうまくいっていないか、プログラムがうまく書き込めていません。
  - 電源をオフにして XIAO を PC と繋いでみてください。PC から電源が供給されます。もしペアリングできるようになった場合は半田付けの問題です。
- ペアリングできるが LED が光らない場合：XIAO と LED の間のはんだ付けがうまくいっていないようです。XIAO の裏面のパッドの半田付けを見直してください。
- LED が光るが、ペアリングできない場合：左右に書き込むファームウェアを逆にしているか、両方に左側用ファームウェアを書き込んでいる可能性があります。XAIO を PC に接続して、リセットボタンをダブルクリックしてファームウェアを書き込み直してみてください。

## 6. ケースの組み立て

基板、トッププレート、キースイッチを組み立てます

### 左側

1. トッププレートに設定ボタン x2 をはめ込みます
2. トッププレートを基板にはめ込みます
3. ねじと干渉しない部分のキースイッチを取り付けます
   - スイッチを取り付ける際はできるだけソケットを裏から押さえながら取り付けてください。ソケットが基板から剥がれる悲しい事故が防げます。
   - スイッチの向きに注意してください。一部のソケットは向きが違います。
   - スイッチの端子が曲がっていないか確認して、端子が確実にソケットに入ることを確認しながら取り付けてください。うまく挿さっていない状態で無理に押し込むと端子が曲がってスイッチが使えなくなったり、ソケットが基板のパターンごと外れてキーボードが使えなくなります。
4. （写真がない）ボトムケースの３つの穴の部分にネオジム磁石を入れます。向きは右側で調整するので適当で良いです。
5. （写真がない）**電源ボタンにカバーを取り付けます** （忘れやすいので注意。あとで忘れたことに気づいたらネジを外してから取り付けてください。）
6. トッププレートと基板をボトムプレートにはめ込んでねじ止めします。
   - USB ポート部分から差し込むようにはめ込んでください。
   - 全てのネジを閉める必要はありません　動かない場合に取り外すことも考えて４隅４〜５個のねじを適宜つけてください。
   - トッププレートとボトムプレートに微妙に隙間ができるかもしれませんが、現状では仕様です。
7. 残りのスイッチを取り付けます。スイッチの向きがソケットと合っていること、端子が曲がっていないことを確かめて優しく取り付けてください。
8. ボトムケースの裏側に滑り止めシールを取り付けます
   - 滑り止めにちょうど合いそうなシルエットがついているのでそれに合わせて貼ってください。
   - 滑り止めに貼られた保護フィルムを剥がします。
   - 滑り止めは市販のちょっと良さげなやつ(?) https://sss-create.com/collections/griplus を使っています

|                    |                    |                    |                    |
| ------------------ | ------------------ | ------------------ | ------------------ |
| ![](./img/6_1.jpg) | ![](./img/6_2.jpg) | ![](./img/6_3.jpg) | ![](./img/6_4.jpg) |

|                    |                    |                    |                    |
| ------------------ | ------------------ | ------------------ | ------------------ |
| ![](./img/6_5.jpg) | ![](./img/6_6.jpg) | ![](./img/6_7.jpg) | ![](./img/6_8.jpg) |

### 右側

トラックボールをつける部分が難しいです。

1. トッププレートに矢印キーボタン x4 をはめ込みます
   - 矢印キーボタンには一面だけ横方向への出っ張りが小さい面があります。下の写真のような向きではめ込んでください。
2. トッププレートを基板にはめ込みます
3. ねじと干渉しない部分のキースイッチを取り付けます
4. （写真がない）**電源ボタンのカバーを取り付けます** （忘れやすいので注意。あとで忘れたことに気づいたらネジを外してから取り付けてください。）
5. トラックボール基板に FFC ケーブルを取り付けます。
   - 基板側の端子の黒い部分が立った状態でケーブルを差し込みます。
   - ケーブルは青い樹脂がついた側が基盤と逆側で、金属端子が剥き出しの側が基板とくっつく向きが正しい向きです。
   - 奥まで差し込めたら、黒い端子を奥の方に倒してケーブルを固定します。
   - 固定はあまり強くないので、以降のステップで引っ張らないように注意してください。
6. トラックボール基板をトラックボールケースにはめ込みます
   - 少しきついですが基板を壊さないように注意しながら少し力を入れてはめ込みます
   - **はめ込み方にコツがあるので下の写真で細かいステップを解説しています。**
7. トラックボールケースとボトムケースを黒い M2 ねじ x3 でねじ止めします。
8. FFC ケーブルをボトムケースにテープで固定します。基板と上手く干渉しないようにケーブルを収めた状態で固定してください。
9. 左手キーボードを右手の裏側に合わせるように置いて、右手のボトムケースにネオジム磁石３個をセットします。
   - 左手側の磁力で磁石が引きつけ合う方向にセットされるはずです。
10. キーボード基板に FFC ケーブルを取り付けます
    - 少し難しいと思いますが、FFC ケーブルを引っ張らないように気をつけながら作業してください。
11. FFC ケーブルをうまく取り回しながらキーボード基板をボトムケースにはめ込みます
12. ねじ止めします　ここでも全てのネジを止める必要はありません。
13. 残りのスイッチを取り付けます
14. ボトムケースの裏側に滑り止めシールを取り付けます

| 1. 矢印ボタンの方向 |
| ------------------- |
| ![](./img/7_1.jpg)  |

| 5 トラックボール基板に FFC ケーブルをつける | 6.1 図示した下側の角から先にケースに入れる | 6.2 もう一方の下側の角をはめる | 6.3 上から水平に押し込む |
| ------------------------------------------- | ------------------------------------------ | ------------------------------ | ------------------------ |
| ![](./img/7_4.jpg)                          | ![](./img/7_5.jpg)                         | ![](./img/7_6.jpg)             | ![](./img/7_7.jpg)       |

| 6.4 図示した奥の角を押し込む | 6.5 奥方向へ横に押し込む | 7 ボトムケースにセット | ねじどめ            |
| ---------------------------- | ------------------------ | ---------------------- | ------------------- |
| ![](./img/7_8.jpg)           | ![](./img/7_9.jpg)       | ![](./img/7_10.jpg)    | ![](./img/7_11.jpg) |

| ３箇所ねじ止めした状態 | FFC ケーブルをうまく取り回す | テープで止める      | 左手の裏側の上に右手ケースを乗せてボトムケースに磁石取り付け+右手基板を FFC ケーブルに接続 |
| ---------------------- | ---------------------------- | ------------------- | ------------------------------------------------------------------------------------------ |
| ![](./img/7_12.jpg)    | ![](./img/7_13.jpg)          | ![](./img/7_14.jpg) | ![](./img/7_15.jpg)                                                                        |

| トラックボールケースとトッププレートが干渉している状態 | 無理やり押し込みます |
| ------------------------------------------------------ | -------------------- |
| ![](./img/7_16.jpg)                                    | ![](./img/7_17.jpg)  |

## 完成！

[使い方ガイド](./FeatureGuide.md) を参考にして BLE のセットアップやキーマップのカスタマイズをしてください。
プログラミングが得意な方はファームウェアの改善にも挑戦してみると楽しいです。
ライブラリの改善やデフォルト設定の改善案などがあればこのレポジトリにプルリクエストを作ってもらえるとありがたいです。

## 最後に

このビルドガイドは DYA Dash を使って書かれました。

普通の Row staggered キーボードと併用しても混乱が少なく、慣れていない状態でも大きなストレスなく使えるキーボードに仕上がったのではないかと思っています。

と言いつつ、作者は [DYA](https://github.com/cormoran/dya-keyboard)キーボード推しなので DYA Dash を使うのは外出時が中心になりそうです。
